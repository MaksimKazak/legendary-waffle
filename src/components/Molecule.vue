<template>
  <svg width="580" height="400" xmlns="http://www.w3.org/2000/svg">
    <g>
      <rect fill="#fff" id="canvas_background" height="402" width="582" y="-1" x="-1"/>
      <g display="none" overflow="visible" y="0" x="0" height="100%" width="100%" id="canvasGrid">
        <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%"/>
      </g>
    </g>
    <g>
      <ellipse id="point_1" ry="17" rx="17" cy="198.4375" cx="293.5" stroke-width="1.5" stroke="#000" fill="#4c4c4c"/>
      <ellipse id="point_2" ry="5.897435" rx="5.897435" cy="156.153834" cx="364.358959" stroke-width="1.5" stroke="#000" fill="#ff0000"/>
      <ellipse id="point_3" ry="5.897435" rx="5.897435" cy="237.972087" cx="369.207448" stroke-width="1.5" stroke="#000" fill="#ff0000"/>
      <ellipse id="point_4" ry="5.897435" rx="5.897435" cy="154.61538" cx="436.281704" stroke-width="1.5" stroke="#000" fill="#4c4c4c"/>
      <ellipse id="point_5" ry="5.897435" rx="5.897435" cy="238.076533" cx="437.435551" stroke-width="1.5" stroke="#000" fill="#4c4c4c"/>
      <ellipse id="point_6" ry="5.897435" rx="5.897435" cy="189.878538" cx="486.808022" stroke-width="1.5" stroke="#000" fill="#4c4c4c"/>
      <ellipse id="point_7" ry="5.897435" rx="5.897435" cy="281.983807" cx="450.492229" stroke-width="1.5" stroke="#000" fill="#4c4c4c"/>
      <ellipse id="point_8" ry="5.897435" rx="5.897435" cy="327.246962" cx="470.492225" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_9" ry="5.897435" rx="5.897435" cy="190.931174" cx="526.281702" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_10" ry="5.897435" rx="5.897435" cy="141.457487" cx="495.75539" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_11" ry="5.897435" rx="5.897435" cy="260.404853" cx="492.071179" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_12" ry="5.897435" rx="5.897435" cy="86.720643" cx="492.597493" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_13" ry="5.897435" rx="5.897435" cy="235.738182" cx="220.700636" stroke-width="1.5" stroke="#000" fill="#ff0000"/>
      <ellipse id="point_14" ry="5.897435" rx="5.897435" cy="155.878538" cx="217.884045" stroke-width="1.5" stroke="#000" fill="#ff0000"/>
      <ellipse id="point_15" ry="5.897435" rx="5.897435" cy="299.352227" cx="408.386965" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_16" ry="5.897435" rx="5.897435" cy="88.299591" cx="435.229077" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_17" stroke="#000" ry="5.897435" rx="5.897435" cy="117.24696" cx="465.755392" stroke-width="1.5" fill="#4c4c4c"/>
      <ellipse id="point_18" ry="5.897435" rx="5.897435" cy="154.525364" cx="153.427338" stroke-width="1.5" stroke="#000" fill="#4c4c4c"/>
      <ellipse id="point_19" ry="5.897435" rx="5.897435" cy="275.132456" cx="133.427164" stroke-width="1.5" stroke="#000" fill="#4c4c4c"/>
      <ellipse id="point_20" ry="5.897435" rx="5.897435" cy="312.708534" cx="115.245188" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_21" ry="5.897435" rx="5.897435" cy="129.676674" cx="95.851091" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_22" ry="5.897435" rx="5.897435" cy="194.525711" cx="87.366167" stroke-width="1.5" stroke="#000" fill="#4c4c4c"/>
      <ellipse id="point_23" ry="5.897435" rx="5.897435" cy="77.555016" cx="111.608797" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_24" stroke="#000" ry="5.897435" rx="5.897435" cy="193.91964" cx="42.517294" stroke-width="1.5" fill="#0000ff"/>
      <ellipse id="point_25" ry="5.897435" rx="5.897435" cy="111.494702" cx="134.639297" stroke-width="1.5" stroke="#000" fill="#4c4c4c"/>
      <ellipse id="point_26" ry="5.897435" rx="5.897435" cy="287.859837" cx="174.639643" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_27" ry="5.897435" rx="5.897435" cy="91.494526" cx="170.397179" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <ellipse id="point_28" ry="5.897435" rx="5.897435" cy="236.950314" cx="149.184874" stroke-width="1.5" stroke="#000" fill="#4c4c4c"/>
      <ellipse id="point_29" ry="5.897435" rx="5.897435" cy="260.586878" cx="91.002562" stroke-width="1.5" stroke="#000" fill="#0000ff"/>
      <line id="edge_1" class="19 26" stroke-linecap="null" stroke-linejoin="null" y2="278.076893" x2="139.230758" y1="285.384585" x1="168.84614" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_2" class="19 20" stroke-linecap="null" stroke-linejoin="null" y2="280.769201" x2="131.923066" y1="307.30766" x1="118.076914" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_3" class="19 29" stroke-linecap="null" stroke-linejoin="null" y2="272.692278" x2="128.461528" y1="261.923048" x1="96.538454" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_4" class="22 24" stroke-linecap="null" stroke-linejoin="null" y2="194.230746" x2="81.15384" y1="194.615362" x1="48.461535" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_5" class="21 25" stroke-linecap="null" stroke-linejoin="null" y2="114.230753" x2="128.846143" y1="126.538444" x1="100.769223" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_6" class="23 25" stroke-linecap="null" stroke-linejoin="null" y2="106.538446" x2="130.384605" y1="82.307678" x1="114.615375" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_7" class="25 27" stroke-linecap="null" stroke-linejoin="null" y2="108.461522" x2="139.615373" y1="95.3846" x1="165.769217" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_8" class="16 17" stroke-linecap="null" stroke-linejoin="null" y2="113.043466" x2="460.869537" y1="92.463757" x1="438.840553" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_9" class="12 17" stroke-linecap="null" stroke-linejoin="null" y2="91.052632" x2="489.736844" y1="112.105263" x1="469.736844" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_10" class="10 17" stroke-linecap="null" stroke-linejoin="null" y2="138.947368" x2="490.789476" y1="121.578947" x1="470.26316" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_11" class="6 9" stroke-linecap="null" stroke-linejoin="null" y2="190" x2="520.26316" y1="190" x1="492.894739" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_12" class="7 11" stroke-linecap="null" stroke-linejoin="null" y2="262.631579" x2="487.105265" y1="280.526316" x1="455.526318" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_13" class="7 8" stroke-linecap="null" stroke-linejoin="null" y2="322.105263" x2="467.631581" y1="287.368421" x1="452.894739" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_14" class="7 15" stroke-linecap="null" stroke-linejoin="null" y2="297.368421" x2="412.894739" y1="283.157895" x1="445.000002" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_15" class="1 2" stroke-linecap="undefined" stroke-linejoin="undefined" y2="158.974347" x2="358.461524" y1="189.743575" x1="308.205117" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_16" class="1 3" stroke-linecap="undefined" stroke-linejoin="undefined" y2="235.757772" x2="363.63643" y1="208.485022" x1="307.878807" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_17" class="2 4" stroke-linecap="null" stroke-linejoin="null" y2="154.230063" x2="430.382635" y1="154.614677" x1="369.998296" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_18" class="3 5" stroke-linecap="null" stroke-linejoin="null" y2="238.075833" x2="432.305703" y1="238.075833" x1="375.382886" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_19" class="4 6" stroke-linecap="null" stroke-linejoin="null" y2="185.789474" x2="481.842107" y1="156.842105" x1="442.368423" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_20" class="5 6" stroke-linecap="null" stroke-linejoin="null" y2="195.789474" x2="484.473686" y1="236.315789" x1="442.368423" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_21" class="4 17" stroke-linecap="null" stroke-linejoin="null" y2="122.105263" x2="461.842107" y1="149.473684" x1="439.736844" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_22" class="5 7" stroke-linecap="null" stroke-linejoin="null" y2="277.894737" x2="449.210528" y1="243.684211" x1="438.157897" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_23" class="1 14" stroke-linecap="null" stroke-linejoin="null" y2="158.222222" x2="224" y1="190.222222" x1="278.222222" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_24" class="1 13" stroke-linecap="null" stroke-linejoin="null" y2="232.888889" x2="225.333333" y1="209.333333" x1="280" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_25" class="14 18" stroke-linecap="null" stroke-linejoin="null" y2="155.152835" x2="211.514484" y1="154.546769" x1="159.392828" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_26" class="13 28" stroke-linecap="null" stroke-linejoin="null" y2="235.384589" x2="214.615367" y1="236.15382" x1="154.999987" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_27" class="22 28" stroke-linecap="null" stroke-linejoin="null" y2="234.615358" x2="143.461527" y1="198.0769" x1="91.923069" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_28" class="18 22" stroke-linecap="null" stroke-linejoin="null" y2="189.999977" x2="91.923069" y1="154.230749" x1="147.692296" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_29" class="18 25" stroke-linecap="null" stroke-linejoin="null" y2="148.461519" x2="151.153834" y1="116.92306" x1="137.307681" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
      <line id="edge_30" class="19 28" stroke-linecap="null" stroke-linejoin="null" y2="269.23074" x2="136.153835" y1="242.307665" x1="146.923065" fill-opacity="null" stroke-opacity="null" stroke-width="1.5" stroke="#000" fill="none"/>
    </g>
  </svg>

</template>

<script>
  export default {
    props: ['edges', 'fragmentation', 'end'],
    watch: {
      fragmentation: {
        handler (fragmentation) {
          setTimeout(() => {
            this.fragment();
          }, 100);
        },
        deep: true,
        immediate: true
      },
      edges:{
        handler (edges) {
          this.$nextTick(() => {
            if (this.end) {
              this.fragment();
            }
          });
        },
        immediate: true,
        deep: true
      }
    },
    methods: {
      fragment () {
        this.edges.forEach(edge => {
          if (edge.isBlocked) {
            return;
          }
          let line = document.getElementsByClassName(edge.vertices.join(' '))[0];
          line.style.display = edge.isVisible ? 'inline-block' : 'none';
        });
      }
    }
  }
</script>